# ====================================
# Consumer Contract Test 프로필
# ====================================
# Consumer Contract Test는 Producer가 배포한 Stub을 사용하여
# FeignClient가 Contract를 준수하는지 검증합니다.
#
# - 인프라(DB, Redis, Kafka) 불필요
# - Stub Runner가 WireMock 서버를 띄우고, FeignClient가 해당 서버로 요청
#
# Producer Contract Test(Stub 발행)는 인프라가 필요하므로 test 프로필 사용

spring:
  cloud:
    openfeign:
      client:
        config:
          default:
            connect-timeout: 5000
            read-timeout: 5000
  # JPA/DataSource 비활성화 (Contract Test는 DB 불필요)
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.redisson.spring.starter.RedissonAutoConfigurationV2

# Feign Client 설정 (Stub Runner가 제공하는 WireMock 서버 포트 사용)
feign:
  clients:
    product-service:
      url: http://localhost:8083
    store-service:
      url: http://localhost:8084

# Stub Runner 설정
stubrunner:
  ids-to-service-ids:
    product-api: product-service
    store-api: store-service

logging:
  level:
    org.springframework.cloud.contract: DEBUG
    com.groom.order.adapter.outbound.client: DEBUG
